# Разработка auth-модуля для ресурса "Карьерный навигатор"
## Общие сведения
Данный ресурс представляет из себя web-приложение, которое объеденяет абитуриентов, ВУЗ'ы и работодателей, нацеленное на развитие у обучающихся осознанного выбора образовательной программы учебного заведения, для дальнейшего связывания полученных профильных навыков с трудовой деятельностью.

## Введение
Для успешной реализации auth-модуля необходимо понять какие объекты будут использовать его. Запросы к серверу будет производить программа, исполняющаяся на устройстве пользователя.

## Моделирование таблиц БД для отладки
Для успешной реализации хранения пользователей необходимо выделить общие свойства пользователей: ФИО, пол, e-mail, пароль, дата создания аккаунта, дата последнего входа, активен ли аккаунт.

Затем, для реализации методов сброса пароля и подтверждения адреса эл. почты - необходимо сделать таблицу, ставящую в соответствие e-mail с одноразовым паролем. Эта таблица будет содержать эл. почту пользователя, одноразовый пароль, количество попыток валидации OTP и дата его создания, чтобы установить период истекания действия.

Таблица 1 - Атрибуты таблицы users

| Атрибут       | Тип данных                     | Ограничения    | Описание                     |
|---------------|--------------------------------|----------------|------------------------------|
| id            | SERIAL                         | PRIMARY KEY    | Уникальный идентификатор     |
| last_name     | VARCHAR(50)                    | NOT NULL       | Фамилия пользователя         |
| first_name    | VARCHAR(20)                    | NOT NULL       | Имя пользователя             |
| patronymic    | VARCHAR(30)                    | NULL           | Отчество                     |
| is_male       | BOOLEAN                        | NOT NULL       | Пол                          |
| email         | VARCHAR(128)                   | NOT NULL UNIQUE| Электронная почта            |
| password      | VARCHAR(128)                   | NOT NULL       | Хэш пароля                   |
| is_active     | BOOLEAN                        | DEFAULT FALSE  | Активность аккаунта          |
| created_at    | TIMESTAMPTZ                    | DEFAULT NOW()  | Дата создания                |
| last_login    | TIMESTAMPTZ                    | NULL           | Дата последнего входа        |

Таблица 2 - Атрибуты таблицы otp_codes

| Атрибут       | Тип данных                     | Ограничения    | Описание                     |
|---------------|--------------------------------|----------------|------------------------------|
| email         | VARCHAR(128)                   | PRIMARY KEY    | Почта пользователя           |
| otp_code      | VARCHAR(6)                     | NOT NULL       | Одноразовый пароль           |
| created_at    | TIMESTAMPTZ                    | NOT NULL       | Дата создания OTP            |
| attempts      | INTEGER                        | NOT NULL       | Количество попыток           |

## Использование
Для начала необходимо настроить .env файл в соответствии с config.js в корневой директории. Подключить свою БД и email провайдера.
Далее установить зависимости, используя команду:
```javascript
npm init
```

Затем запустить index.js, используя команду:

```javascript
node index.js
```

